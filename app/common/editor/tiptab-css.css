@reference "../../app.css";

.tiptap {
    @apply px-0 mx-0 ;

    :first-child {
        @apply mt-0;
    }

    blockquote {
        @apply sm:ml-5  sm:py-4 sm:px-8 my-6 text-gray-600 relative;

        &::before {
            content: '';
            @apply absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b to-primary from-emerald-50 rounded-full;
        }

    }

    p {
        @apply my-2 ml-2;
    }

    h1 {
        @apply text-xl font-bold mt-8 pb-2 pl-2 sm:mb-6 sm:pl-5 pt-3 rounded-t-xl bg-pink-100 text-pink-700;
        line-height: 1.2;
    }

    h2 {
        @apply mt-4 ml-3 pb-2 pt-2 font-semibold sm:ml-7 sm:mt-6 pl-4  rounded-b-xl  bg-indigo-100 text-indigo-700;
        line-height: 1.3;
    }

    ul,
    ol {
        padding-left: 1.5rem;
        padding-right: 1rem;
        margin: 1.25rem 1rem 1.25rem 0.4rem;
        list-style-type: disc; /* ul의 경우 bullet point 표시 */

        li p {
            margin-top: 0.25em;
            margin-bottom: 0.25em;
        }
    }

    ol {
        list-style-type: decimal; /* ol의 경우 숫자 표시 */
    }

    ul li {
        list-style-type: disc;
        display: list-item;
    }

    ol li {
        list-style-type: decimal;
        display: list-item;
    }

    ul[data-type='taskList'] {
        list-style: none;
        margin-left: 0;
        padding: 0;

        li {
            align-items: flex-start;
            display: flex;

            > label {
                flex: 0 0 auto;
                margin-right: 0.5rem;
                user-select: none;
            }

            > div {
                flex: 1 1 auto;
            }
        }

        input[type='checkbox'] {
            cursor: pointer;
        }

        ul[data-type='taskList'] {
            margin: 0;
        }
    }

    code {
        @apply bg-gray-100 text-gray-900 rounded px-1 py-0.5 text-sm;
    }

    /* Link styles */
    a {
        @apply text-emerald-600 hover:text-emerald-800 underline underline-offset-2
        transition-colors cursor-pointer;
    }

    /* 외부 링크 아이콘 */
    a[href*="://"]:not([href*="localhost"])::after {
        @apply content-['↗'] ml-1 text-xs opacity-60;
    }


    img {
        display: block;
        height: auto;
        margin: 1.5rem auto;
        max-width: 100%;

        &.ProseMirror-selectednode {
            @apply cursor-pointer ;
            @apply outline-3 outline-emerald-600;
        }
    }



    /* KaTeX 수학 노드 스타일링 */

    .tiptap-mathematics-render {
        cursor: pointer;
        transition: all 0.2s ease;
        border-radius: 4px;
    }

    /* 블록 수학 노드 */

    .tiptap-mathematics-render[data-type="block-math"] {
        display: block;
        text-align: center;
        border-radius: 8px;
        @apply bg-emerald-50 text-base sm:text-xl my-2 py-6 sm:p-6 text-wrap;
    }

    .tiptap-mathematics-render[data-type="block-math"]:hover {
        background-color: #f0f9ff;
        border-color: #0ea5e9;
    }

    /* 인라인 수학 노드 */

    .tiptap-mathematics-render[data-type="inline-math"] {
        display: inline;
        @apply py-2 px-2 sm:p-3 mx-1 bg-yellow-50;

    }

    .tiptap-mathematics-render[data-type="inline-math"]:hover {
        background-color: #eff6ff;
        border-color: #3b82f6;
    }

    /* KaTeX 에러 스타일링 */

    .katex-error {
        color: #dc2626;
        background-color: #fef2f2;
        border: 1px solid #fecaca;
        border-radius: 4px;
        padding: 4px 8px;
    }

    pre {
        @apply bg-gray-900 border border-gray-700 rounded-md text-gray-100;
        @apply font-mono text-sm leading-6 my-4 p-4 relative;

        /* 데스크톱: 가로 스크롤 */
        white-space: pre;
        overflow-x: auto;


        code {
            @apply bg-transparent border-0 rounded-none text-inherit;
            @apply inline font-mono text-sm leading-6 m-0 p-0;
            white-space: inherit;
        }

        .language-latex {
            &::before {
                content: "[LaTeX]\A";
                @apply text-orange-300 font-medium;
            }
        }

        .language-python {
            &::before {
                content: "[Python]\A";
                @apply text-blue-300 font-medium;
            }
        }

        pre::before {
            content: "기본 코드 내용입니다.";
            color: #888;
            font-style: italic;
        }

        /* === GitHub Dark Theme - 정리된 색상 팔레트 === */

        /* 주석 (회색) */
        .hljs-comment,
        .hljs-quote {
            @apply text-gray-500 italic;
        }

        /* 키워드 - class, def, if, for 등 (보라색) */
        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-function .hljs-keyword,
        .hljs-class .hljs-keyword {
            @apply text-purple-400;
        }

        /* 함수명/클래스명 (노란색) */
        .hljs-title,
        .hljs-title.class_,
        .hljs-title.function_,
        .hljs-title.class_.inherited__,
        .hljs-doctag {
            @apply text-yellow-300 font-semibold;
        }

        /* 문자열 (초록색) */
        .hljs-string,
        .hljs-template-string {
            @apply text-emerald-400;
        }

        /* 숫자 (청록색) */
        .hljs-number,
        .hljs-literal {
            @apply text-cyan-400;
        }

        /* 변수/속성 (파란색) */
        .hljs-variable,
        .hljs-attr,
        .hljs-attribute,
        .hljs-property,
        .hljs-params,
        .hljs-variable.language_ {
            @apply text-blue-300;
        }

        /* 내장함수/타입 (주황색) */
        .hljs-built_in,
        .hljs-builtin-name,
        .hljs-type {
            @apply text-orange-400;
        }

        /* 특수 기호/데코레이터 (핑크색) */
        .hljs-meta,
        .hljs-symbol,
        .hljs-bullet,
        .hljs-template-variable,
        .hljs-template-tag {
            @apply text-pink-400;
        }

        /* 모듈/네임스페이스 (청록색) */
        .hljs-module,
        .hljs-namespace {
            @apply text-teal-400;
        }

        /* 태그/섹션 (빨간색) */
        .hljs-section,
        .hljs-name,
        .hljs-tag {
            @apply text-red-400;
        }

        /* 정규표현식/링크 (시안색) */
        .hljs-regexp,
        .hljs-link {
            @apply text-cyan-300;
        }

        /* 연산자/기본 텍스트 (회색) */
        .hljs-operator,
        .hljs-subst {
            @apply text-gray-300;
        }

        /* 변경사항 표시 */
        .hljs-deletion {
            @apply text-red-300;
        }

        .hljs-addition {
            @apply text-green-400;
        }

        /* 텍스트 스타일 */
        .hljs-emphasis {
            @apply italic;
        }

        .hljs-strong {
            @apply font-bold;
        }

        /* 수식 */
        .hljs-formula {
            @apply text-gray-100;
            background: rgba(75, 85, 99, 0.4);
        }
    }
}

